define(["require","flight/lib/component","painters/mixin/withFreehandPainter"],function(t){function n(){this.defaultAttrs({canvas:void 0,_socket:void 0}),this.after("initialize",function(){this.attachEventListeners();var t=this;this.attr._socket.on("action",function(n){t.startFreehandPainting(t.attr.canvas);var i=t.getBrush().brush;i.onMouseMove(n,!0)})}),this.setCanvas=function(t){this.attr.canvas=t},this.attachEventListeners=function(){this.on("canvas-ready",function(t,n){this.setCanvas(n.canvas)}.bind(this)),this.on("cancel-painting",function(t,n){"freehand"!==n.active&&this.stopFreehandPainting()}.bind(this)),this.on("request-freehandPainting",function(){this.cancelCurrentPainting(),this.initFreehandPainting()}.bind(this))},this.cancelCurrentPainting=function(){this.trigger("cancel-painting",{active:"freehand"})},this.initFreehandPainting=function(){this.trigger("notify",{type:"info",message:"Press [ESC] to cancel any painting"}),this.startFreehandPainting(this.attr.canvas)}}var i=t("flight/lib/component"),a=t("painters/mixin/withFreehandPainter");return i(n,a)});