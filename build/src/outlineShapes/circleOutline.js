define(["require","./asOutlineShape"],function(t){function i(t,i,e){return 0===t?{x:i.x,y:i.y-e}:90===t?{x:i.x+e,y:i.y}:180===t?{x:i.x,y:i.y+e}:270===t?{x:i.x-e,y:i.y}:{x:Math.sin(t)*e+i.x,y:Math.cos(t)*e+i.y}}function e(t,i){this.initialize(t,i)}var n=t("./asOutlineShape");return e.prototype.getOutlinePoints=function(t){for(var e=[],n=t-5,o=this.outline.x,s=this.outline.y,r=this.outline.radius,a=0;360>a;a+=n)e.push(i(a,{x:o,y:s},r));return e[0].type="Circle",e[0].outline=this.outline,e},e.prototype.onMouseDown=function(t){this.canvas.selection=!1;var i=this.canvas.getPointer(t.e);return this.outline={x:i.x,y:i.y,radius:1},this.isDrawing=!0,this},e.prototype.onMouseMove=function(t){if(this.isDrawing){var i=this.canvas.getPointer(t.e);this.outline.radius=Math.sqrt(Math.pow(i.x-this.outline.x,2)+Math.pow(i.y-this.outline.y,2)),this.renderOutline()}return this},e.prototype.renderOutline=function(){var t=this.canvas.contextTop;this.canvas.clearContext(t),t.save(),t.beginPath(),t.lineWidth=1,t.strokeStyle=this.cfg.strokeColor,t.arc(this.outline.x,this.outline.y,this.outline.radius,2*Math.PI,!1),t.stroke(),t.restore()},n.call(e.prototype),e});