define(["require","fabric"],function(t){var i=t("fabric"),n=i.util.getRandomInt,e=i.util.createClass(i.BaseBrush,{width:10,initialize:function(t){this.canvas=t,this.points=[]},addPoint:function(t){var e=new i.Point(t.x,t.y),r=n(0,this.width),o=new i.Color(this.color).setAlpha(n(0,100)/100).toRgba();return e.radius=r,e.strokeColor=o,this.points.push(e),e},drawCircle:function(t){var i=this.addPoint(t),n=this.canvas.contextTop;n.lineWidth=1,n.strokeStyle=i.strokeColor,n.beginPath(),n.arc(i.x,i.y,i.radius,0,2*Math.PI,!1),n.closePath(),n.stroke()},onMouseDown:function(t){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this.drawCircle(t)},onMouseMove:function(t){this.drawCircle(t)},onMouseUp:function(){var t=this.canvas.renderOnAddition;this.canvas.renderOnAddition=!1;for(var n=[],e=0,r=this.points.length;r>e;e++){var o=this.points[e];n.push(new i.Circle({radius:o.radius,left:o.x,top:o.y,fill:null,originX:"center",originY:"center",stroke:o.strokeColor,strokeWidth:1}))}var s=new i.Group(n,{originX:"center",originY:"center"});this.canvas.add(s),this.canvas.fire("path:created",{path:s}),this.canvas.clearContext(this.canvas.contextTop),this.canvas.renderOnAddition=t,this.canvas.renderAll()}});return e});