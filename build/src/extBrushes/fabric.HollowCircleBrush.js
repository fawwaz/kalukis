define(["require","fabric"],function(t){var e=t("fabric"),i=e.util.getRandomInt,r=e.util.createClass(e.BaseBrush,{width:10,initialize:function(t){this.canvas=t,this.points=[]},addPoint:function(t){var r=new e.Point(t.x,t.y),n=i(0,this.width),s=new e.Color(this.color).setAlpha(i(0,100)/100).toRgba();return r.radius=n,r.strokeColor=s,this.points.push(r),r},drawCircle:function(t){var e=this.addPoint(t),i=this.canvas.contextTop;i.lineWidth=1,i.strokeStyle=e.strokeColor,i.beginPath(),i.arc(e.x,e.y,e.radius,0,2*Math.PI,!1),i.closePath(),i.stroke()},onMouseDown:function(t){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this.drawCircle(t)},onMouseMove:function(t){this.drawCircle(t)},onMouseUp:function(){var t=this.canvas.renderOnAddition;this.canvas.renderOnAddition=!1;for(var i=[],r=0,n=this.points.length;n>r;r++){var s=this.points[r];i.push(new e.Circle({radius:s.radius,left:s.x,top:s.y,fill:null,stroke:s.strokeColor,strokeWidth:1}))}var o=new e.Group(i);this.canvas.add(o),this.canvas.fire("path:created",{path:o}),this.canvas.clearContext(this.canvas.contextTop),this.canvas.renderOnAddition=t,this.canvas.renderAll()}});return r});