define(["require","fabric","canvasUtils/brushDistance"],function(n){function e(n){if(n.hasBeenHijacked)return n;var e=n.onMouseMove,t=n.points?n.points:n._points?n._points:n.sprayChunks;return n.onMouseMove=function(r,a){if(1>=s)return a="undefined"!=typeof a?a:!1,a||socket.emit("action",r),e.call(n,r);var c=t.length,u=t[c-1];return console.log(u),i(u,r,s)?e.call(n,o(u,r,s)):void 0},n.hasBeenHijacked=!0,n}var t=(n("fabric"),n("canvasUtils/brushDistance")),i=t.isFarEnough,o=t.getClosestPoint,s=0;return{hijack:function(n){return e(n)},setDistance:function(n){s=n},getDistance:function(){return s}}});