define(["require","fabric","canvasUtils/brushDistance"],function(n){function e(n){if(n.hasBeenHijacked)return n;var e=n.onMouseMove,t=n.points?n.points:n._points?n._points:n.sprayChunks;return n.onMouseMove=function(o){if(1>=s)return e.call(n,o);var a=t.length,c=t[a-1];return console.log(c),i(c,o,s)?e.call(n,r(c,o,s)):void 0},n.hasBeenHijacked=!0,n}var t=(n("fabric"),n("canvasUtils/brushDistance")),i=t.isFarEnough,r=t.getClosestPoint,s=0;return{hijack:function(n){return e(n)},setDistance:function(n){s=n},getDistance:function(){return s}}});