define(["require","flight/lib/component","fabric"],function(t){function i(){this.defaultAttrs({canvas:void 0}),this.after("initialize",function(){this.attachEventListener()}),this.attachEventListener=function(){this.on("canvasManipulation-clicked",function(t,i){this[i.manipulationId+"Handler"]&&this[i.manipulationId+"Handler"].apply(this,i)}),this.on("canvas-ready",function(t,i){this.setCanvas(i.canvas)}.bind(this))},this.setCanvas=function(t){this.attr.canvas=t},this.removeHandler=function(){var t=this.attr.canvas;t&&(t.getActiveGroup()?(t.getActiveGroup().forEachObject(function(i){t.remove(i)}),t.discardActiveGroup()):t.getActiveObject()&&t.remove(t.getActiveObject()),t.renderAll())},this.clearHandler=function(){this.attr.canvas&&this.attr.canvas.clear()}}{var n=t("flight/lib/component");t("fabric")}return n(i)});