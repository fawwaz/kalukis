define(["require","flight/lib/component","fabric"],function(t){function e(){this.defaultAttrs({canvas:void 0}),this.after("initialize",function(){this.attachEventListener(),this.requestCanvas()}),this.attachEventListener=function(){this.on("canvasManipulation-clicked",function(t,e){this[e.manipulationId+"Handler"]&&this[e.manipulationId+"Handler"].apply(this,e)}),this.on("canvas-served",function(t,e){this.setCanvas(e.canvas)}.bind(this))},this.requestCanvas=function(){this.trigger("request-canvas")},this.setCanvas=function(t){this.attr.canvas=t},this.removeHandler=function(){var t=this.attr.canvas;t&&(t.getActiveGroup()?(t.getActiveGroup().forEachObject(function(e){t.remove(e)}),t.discardActiveGroup()):t.getActiveObject()&&t.remove(t.getActiveObject()),t.renderAll())},this.clearHandler=function(){this.attr.canvas&&this.attr.canvas.clear()}}var i=t("flight/lib/component");return t("fabric"),i(e)});