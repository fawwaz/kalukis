define(["require","flight/lib/component"],function(t){function e(){this.defaultAttrs({canvasId:void 0,canvas:void 0,outlineShapes:{},prop:{width:10,fillColor:"#000000",strokeColor:"#000000"}}),this.after("initialize",function(){this.attachEventListener()}),this.attachEventListener=function(){this.on("canvas-ready",function(t,e){this.setCanvas(e.id,e.canvas)}.bind(this)),this.on("request-outlineShape",function(t,e){this.requestOutlineShape(e.id)}.bind(this)),this.on("brushProperty-updated",function(t,e){this.updateOutlineProperties(e)}.bind(this))},this.setCanvas=function(t,e){this.attr.canvasId=t,this.attr.canvas=e},this.requestOutlineShape=function(e){if(e+="Outline",this.attr.outlineShapes.hasOwnProperty(e)){var i=this.attr.outlineShapes[e];this.setOutlineShapeProperties(i),this.publishOutlineShape(i)}else t(["outlineShapes/"+e],function(t){var i=new t(this.attr.canvas,this.attr.prop);this.attr.outlineShapes[e]=i,this.publishOutlineShape(i)}.bind(this))},this.publishOutlineShape=function(t){this.trigger("outlineShape-served",{outlineShape:t})},this.updateOutlineProperties=function(t){if(t.hasOwnProperty("key")&&t.hasOwnProperty("newValue")){var e=this.attr.prop[t.key];this.attr.prop[t.key]=t.newValue,this.trigger("outlineShapeProperty-updated",{key:t.key,oldValue:e,newValue:t.newValue})}},this.setOutlineShapeProperties=function(t){Object.keys(this.attr.prop||{}).forEach(function(e){t.set(e,this.attr.prop[e])},this)}}var i=t("flight/lib/component");return i(e)});